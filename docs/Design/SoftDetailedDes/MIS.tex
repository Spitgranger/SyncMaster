\documentclass[12pt, titlepage]{article}

\usepackage{amsmath, mathtools}

\usepackage[round]{natbib}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{colortbl}
\usepackage{xr}
\usepackage{hyperref}
\usepackage{longtable}
\usepackage{xfrac}
\usepackage{tabularx}
\usepackage{float}
\usepackage{siunitx}
\usepackage{booktabs}
\usepackage{multirow}
\usepackage[section]{placeins}
\usepackage{caption}
\usepackage{fullpage}

\hypersetup{
  bookmarks=true,     % show bookmarks bar?
  colorlinks=true,       % false: boxed links; true: colored links
  linkcolor=red,          % color of internal links (change box color
  % with linkbordercolor)
  citecolor=blue,      % color of links to bibliography
  filecolor=magenta,  % color of file links
  urlcolor=cyan          % color of external links
}

\usepackage{array}

\externaldocument{../../SRS/SRS}

\input{../../Comments}
\input{../../Common}

\begin{document}

\title{Module Interface Specification for \progname{}}

\author{\authname}

\date{\today}

\maketitle

\pagenumbering{roman}

\section{Revision History}

\begin{tabularx}{\textwidth}{p{3cm}p{2cm}X}
  \toprule {\bf Date} & {\bf Version} & {\bf Notes}\\
  \midrule
  Date 1 & 1.0 & Notes\\
  Date 2 & 1.1 & Notes\\
  \bottomrule
\end{tabularx}

~\newpage

\section{Symbols, Abbreviations and Acronyms}

See SRS Documentation at
\url{https://github.com/Spitgranger/SyncMaster/blob/main/docs/SRS-Volere/SRS.pdf
}.

\newpage

\tableofcontents

\newpage

\pagenumbering{arabic}

\section{Introduction}

The following document details the Module Interface Specifications for
SyncMaster, a facilities management application for the Technical
Services team at the Water Division of the City of Hamilton.
This application enables the Technical Services team to effectively distribute
water station documentation to stakeholders as a single source of
truth. It also acts as an authentication tool for external
contractors to verify their presence at stations and confirm work
being performed.

Complementary documents include the System Requirement Specifications
and Module Guide.  The full documentation and implementation can be
found at \url{https://github.com/Spitgranger/SyncMaster}.

\section{Notation}

\wss{You should describe your notation.  You can use what is below as
a starting point.}

The structure of the MIS for modules comes from \citet{HoffmanAndStrooper1995},
with the addition that template modules have been adapted from
\cite{GhezziEtAl2003}.  The mathematical notation comes from Chapter 3 of
\citet{HoffmanAndStrooper1995}.  For instance, the symbol := is used for a
multiple assignment statement and conditional rules follow the form $(c_1
\Rightarrow r_1 | c_2 \Rightarrow r_2 | ... | c_n \Rightarrow r_n )$.

The following table summarizes the primitive data types used by \progname.

\begin{center}
  \renewcommand{\arraystretch}{1.2}
  \noindent
  \begin{tabular}{l l p{7.5cm}}
    \toprule
    \textbf{Data Type} & \textbf{Notation} & \textbf{Description}\\
    \midrule
    character & char & a single symbol or digit\\
    integer & $\mathbb{Z}$ & a number without a fractional component
    in (-$\infty$, $\infty$) \\
    natural number & $\mathbb{N}$ & a number without a fractional
    component in [1, $\infty$) \\
    real & $\mathbb{R}$ & any number in (-$\infty$, $\infty$)\\
    any & any & any data type\\
    \bottomrule
  \end{tabular}
\end{center}

\noindent
The specification of \progname \ uses some derived data types:
sequences, strings, tuples, map, enum, KeyCondition,
AttributeCondition, S3File, HTTPRequest, HTTPResponse, and Optional. Sequences
are lists filled with elements of the same data type. Strings
are sequences of characters. Tuples contain a list of values, potentially of
different types. In addition, \progname \ uses functions, which
are defined by the data types of their inputs and outputs. Local functions are
described by giving their type signature followed by their specification. Maps
are a collection of key-value pairs, where there does not necessarily need to
be a restriction on the data types of the keys and values, but one can be
placed. An enum is a set of values of which the data can be.
AttributeConditions are conditionals placed on an attribute of a
database entry. KeyConditions are a subset of AttributeConditions,
and are condtionals placed on the key attributes of a database entry.
An S3File, is a unique file that exists in AWS S3. HTTPRequest and HTTPResponse
are a subset of maps which conform to the HTTP standard. An Optional is not a
datatype by itself, but specifies that there may be the absence of a value of a
specific type. LogEntry is an object consisting of a UserID, SiteID, an ISO
formatted date and time string, and a type of log (entry or exit).

\section{Module Decomposition}

The following table is taken directly from the Module Guide document
for this project.

\begin{table}[h!]
  \centering
  \begin{tabular}{p{0.3\textwidth} p{0.6\textwidth}}
    \toprule
    \textbf{Level 1}                                       &
    \textbf{Level 2}
    \\
    \midrule

    {Hardware-Hiding Module}                               & N/A
    \\
    \midrule

    \multirow{7}{0.3\textwidth}{Software Decision Modules} & Audit
    and Compliance Module
    \\
    & User Authentication Module      \\
    & Location Verification Module    \\
    & Logging Module                  \\
    & Analytics and Reporting Module  \\
    & User Management Module          \\
    & Document Management Module      \\
    & Job Management Module           \\
    \midrule

    \multirow{3}{0.3\textwidth}{Behaviour-Hiding Modules}  & {API
    Integration Module}
    \\
    & Database Interaction Module     \\
    & Blob Storage Interaction Module \\
    & Request Routing Module          \\
    & Function Compute Module         \\
    \bottomrule
  \end{tabular}
  \caption{Module Hierarchy}
  \label{TblMH}
\end{table}

\newpage
~\newpage

\section{MIS of \wss{Module Name}} \label{Module} \wss{Use labels for
cross-referencing}

\wss{You can reference SRS labels, such as R\ref{R_Inputs}.}

\wss{It is also possible to use \LaTeX for hypperlinks to external documents.}

\subsection{Module}

\wss{Short name for the module}

\subsection{Uses}

\subsection{Syntax}

\subsubsection{Exported Constants}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{p{2cm} p{4cm} p{4cm} p{2cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    \wss{accessProg} & - & - & - \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\wss{Not all modules will have state variables.  State variables give the module
a memory.}

\subsubsection{Environment Variables}

\wss{This section is not necessary for all modules.  Its purpose is to capture
  when the module has external interaction with the environment, such as for a
device driver, screen interface, keyboard, file, etc.}

\subsubsection{Assumptions}

\wss{Try to minimize assumptions and anticipate programmer errors via
exceptions, but for practical purposes assumptions are sometimes appropriate.}

\subsubsection{Access Routine Semantics}

\noindent \wss{accessProg}():
\begin{itemize}
  \item transition: \wss{if appropriate}
  \item output: \wss{if appropriate}
  \item exception: \wss{if appropriate}
\end{itemize}

\wss{A module without environment variables or state variables is unlikely to
  have a state transition.  In this case a state transition can only occur if
the module is changing the state of another module.}

\wss{Modules rarely have both a transition and an output.  In most cases you
will have one or the other.}

\subsubsection{Local Functions}

\wss{As appropriate} \wss{These functions are for the purpose of specification.
  They are not necessarily something that is going to be implemented
  explicitly.  Even if they are implemented, they are not exported; they only
have local scope.}

\section{MIS of Database Interaction Module} \label{Module}

\subsection{Module}

Database Interaction Module

\subsection{Uses}

boto3 (AWS SDK for Python), AWS DynamoDB (AWS Cloud Service for NoSQL Databases)

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{center}
  \begin{tabular}{p{4cm} p{12cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    DBTable.Name & The name of the underlying DynamoDB table resource. \\
    \hline
    DBTable.Access & The level of access the DBTable object has on
    the DynamoDB table. Either ``read'' or ``write''. \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{>{\raggedright}p{3cm} >{\raggedright}p{5cm}
    >{\raggedright}p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    DBTable & \textbf{TableName:} string \newline \textbf{Access:}
    enum[``read'', ``write''] & DBTable & - \\
    \hline
    DBTable.get & \textbf{Key:} map[string $\rightarrow$ any] &
    map[string $\rightarrow$ any] & \textbf{ItemNotFound:} Item with
    requested key does not exist in the database \newline
    \textbf{ExternalServiceFailure:} An internal error from AWS \\
    \hline
    DBTable.put & \textbf{Item:} map[string $\rightarrow$ any]
    \newline \textbf{Condition:} AttributeCondition & map[string
    $\rightarrow$ any] &
    \textbf{ConditionCheckFailed:} The given condition is not met
    \newline \textbf{ExternalServiceFailure:} An internal error from
    AWS \newline \textbf{PermissionException:} If the current access
    level is read-only \\
    \hline
    DBTable.delete & \textbf{Key:} map[string $\rightarrow$ any]
    \newline \textbf{Condition:} AttributeCondition & map[string
    $\rightarrow$ any] & \textbf{ExternalServiceFailure:} An internal
    error from AWS \newline \textbf{ConditionCheckFailed:} The given
    condition is not met \newline \textbf{PermissionException:} If
    the current access level is read-only \\
    \hline
    DBTable.query & \textbf{KeyConditions:} sequence[KeyCondition]
    \newline \textbf{AttributeConditions:}
    sequence[AttributeCondition] & sequence[map[string $\rightarrow$
    any]] & \textbf{ExternalServiceFailure:} An internal error from AWS \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{center}
  \begin{tabular}{p{4cm} p{12cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    Database & The underlying AWS DynamoDB table, can be represented
    as a set of items: $\{i_0, i_1, ..., i_n\}$, where $i_k:
    map[string \rightarrow  any], k\in[0,n]$ \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Environment Variables}

\begin{center}
  \begin{tabular}{p{6cm} p{10cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    LAMBDA\_EXECUTION\_ROLE & When an AWS Lambda Function (The chosen
    AWS compute service for this project), it has an AWS IAM role
    attached to it, that it uses when running. This role needs
    permission for database access for this module to work \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Assumptions}

LAMBDA\_EXECUTION\_ROLE has the required permissions in AWS to access
the database.

\subsubsection{Access Routine Semantics}

\noindent DBTable.get(Key: k):
\begin{itemize}
  \item output: $i_k$, where $i_k \in Database \land dbKey(i_k) == k$
  \item exception: ExternalServiceFailure
\end{itemize}

\noindent DBTable.put(Item: $i_{new}$, Condition: c):
\begin{itemize}
  \item transition: $Database \rightarrow Database \cup \{i_{new}\}$, if
    $c == true \land DBTable.Access == ``write''$
  \item output: $i_{new}$
  \item exception: ExternalServiceFailure, ConditionCheckFailed,
    PermissionException
\end{itemize}

\noindent DBTable.delete(Key: k, Condition: c):
\begin{itemize}
  \item transition: $Database \rightarrow Database - \{i_{old}\}$, where
    $k==dbKey(i_{old}, DBTable.Name)$, if $c == true \land
    DBTable.Access == ``write''$
  \item output: $i_{old}$
  \item exception: ExternalServiceFailure, ConditionCheckFailed,
    PermissionException
\end{itemize}

\noindent DBTable.query(KeyConditions: kc, AttributeConditions: ac):
\begin{itemize}
  \item output: [$i_k | i_k \in Database \land \forall c \in kc (c ==
    true) \land \forall c \in ac (c == true)$]
  \item exception: ExternalServiceFailure
\end{itemize}

\subsubsection{Local Functions}

\begin{center}
  \begin{tabular}{>{\raggedright}p{2cm} >{\raggedright}p{5cm}
    >{\raggedright}p{3.5cm} p{4.5cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Description} \\
    \hline
    dbKey & \textbf{Item:} map[string $\rightarrow$ any] \newline
    \textbf{TableName:} string & map[string $\rightarrow$ any] &
    Returns the keys of the given db item, assuming it is from the
    given table \\
    \hline
  \end{tabular}
\end{center}

\section{MIS of Logging Module} \label{Module}

\subsection{Module}

Logging Module

\subsection{Uses}

Database Interaction Module

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{>{\raggedright}p{3cm} >{\raggedright}p{5cm}
    >{\raggedright}p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    AddLog & \textbf{UserID:} string \newline \textbf{SiteID:} string
    \newline \textbf{Datetime:} string \newline \textbf{Type:}
    enum[``entry'', ``exit''] & LogEntry &
    \textbf{ExternalServiceFailure:} An internal error from AWS \\
    \hline
    ListLogs & \textbf{UserID:} string \newline \textbf{SiteID:}
    string \newline \textbf{FromDatetime:} string \newline
    \textbf{ToDatetime:} string &
    sequence[LogEntry] & \textbf{ExternalServiceFailure:} An internal
    error from AWS \\
    \hline
    PurgeLogs & \textbf{UserID:} string & - &
    \textbf{ExternalServiceFailure:} An internal error from AWS \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{center}
  \begin{tabular}{p{4cm} p{12cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    LogEntryDatabase & The underlying AWS DynamoDB table, can be
    represented as a set of items: $\{l_0, l_1, ..., l_n\}$, where
    $l_k: LogEntry, k\in[0,n]$ \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Environment Variables}

\begin{center}
  \begin{tabular}{p{6cm} p{10cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    LAMBDA\_EXECUTION\_ROLE & When an AWS Lambda Function (The chosen
    AWS compute service for this project), it has an AWS IAM role
    attached to it, that it uses when running. This role needs
    permission for logging database access for this module to work \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Assumptions}

LAMBDA\_EXECUTION\_ROLE has the required permissions in AWS to access
the database.

\subsubsection{Access Routine Semantics}

\noindent AddLog(UserID: u, SiteID: s, Datetime: d, Type: t):
\begin{itemize}
  \item transition: $LogEntryDatabase \rightarrow LogEntryDatabase
    \cup \{l_{new}\}$, where $l_{new}.UserID = u$, $l_{new}.SiteID =
    s$, $l_{new}.Datetime = d$, $l_{new}.Type = t$
  \item output: $l_{new}$
  \item exception: ExternalServiceFailure
\end{itemize}

\noindent ListLogs(UserID: u, SiteID: s, FromDatetime: fd, ToDatetime: td):
\begin{itemize}
  \item output: $[l_k | l_k \in LogEntryDatabase \land l_k.UserID ==
    u \land l_k.SiteID == s \land fd \le l_k.Datetime \le td]$
  \item exception: ExternalServiceFailure
\end{itemize}

\noindent PurgeLogs(UserID: u):
\begin{itemize}
  \item transition: $LogEntryDatabase \rightarrow LogEntryDatabase -
    \{l_k | l_k \in LogEntryDatabase \land l_k.UserID == u \}$
  \item exception: ExternalServiceFailure
\end{itemize}

\subsubsection{Local Functions}

N/A

\section{MIS of Analytics and Reporting Module} \label{Module}


\subsection{Module}
Analytics and Reporting Module

\subsection{Uses}
Database Interaction Module

\subsection{Syntax}

\subsubsection{Exported Constants}
N/A
\subsubsection{Exported Access Programs}
\begin{center}
  \begin{tabular}{p{4.5cm} p{4cm} p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    
    GetErrorsReport & \textbf{FromDatetime:} string \newline 
    \textbf{ToDatetime:} string& 
    sequence[map[string $\rightarrow$ any]] &     
    \textbf{ExternalServiceFailure:} An internal error from AWS
    \newline \textbf{ExecutionError:} Any error that occurs while the
    function is running \\
    \hline
    GetResourceUsageReport & \textbf{FromDatetime:} string \newline 
    \textbf{ToDatetime:} string \newline
     \textbf{Resources:} \newline sequence[resource]& 
    sequence[map[string $\rightarrow$ any]] &     
    \textbf{ExternalServiceFailure:} An internal error from AWS
    \newline \textbf{ExecutionError:} Any error that occurs while the
    function is running \\
    \hline
    GetUserActivityReport & \textbf{FromDatetime:} string \newline 
    \textbf{ToDatetime:} string \newline
     \textbf{UserID:} string& 
    sequence[map[string $\rightarrow$ any]] &     
    \textbf{ExternalServiceFailure:} An internal error from AWS
    \newline \textbf{ExecutionError:} Any error that occurs while the
    function is running \\
    \hline
    GetSystemHealthReport & \textbf{FromDatetime:} string \newline 
    \textbf{ToDatetime:} string & 
    sequence[map[string $\rightarrow$ any]] &     
    \textbf{ExternalServiceFailure:} An internal error from AWS
    \newline \textbf{ExecutionError:} Any error that occurs while the
    function is running \\
    \hline
    GetLoginAttemptsReport & \textbf{FromDatetime:} string \newline 
    \textbf{ToDatetime:} string & 
    sequence[map[string $\rightarrow$ any]] &     
    \textbf{ExternalServiceFailure:} An internal error from AWS
    \newline \textbf{ExecutionError:} Any error that occurs while the
    function is running \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

N/A
\subsubsection{Environment Variables}
\begin{center}
  \begin{tabular}{p{6cm} p{10cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    LAMBDA\_EXECUTION\_ROLE & When an AWS Lambda Function (The chosen
    AWS compute service for this project), it has an AWS IAM role
    attached to it, that it uses when running. This role needs
    permission for S3 bucket access for this module to work \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}
\noindent GetErrorsReport(FromDatetime: string, ToDatetime: string):
\begin{itemize}
  \item output: sequence[map[string $\rightarrow$ any]]
  \item exception: ExternalServiceFailure, ExecutionError
\end{itemize}

\noindent GetResourceUsageReport(FromDatetime: string, ToDatetime: string):
\begin{itemize}
  \item output: sequence[map[string $\rightarrow$ any]]
  \item exception: ExternalServiceFailure, ExecutionError
\end{itemize}

\noindent GetUserActivityReport(FromDatetime: string, ToDatetime: string):
\begin{itemize}
  \item output: sequence[map[string $\rightarrow$ any]]
  \item exception: ExternalServiceFailure, ExecutionError
\end{itemize}

\noindent GetSystemHealthReport(FromDatetime: string, ToDatetime: string):
\begin{itemize}
  \item output: sequence[map[string $\rightarrow$ any]]
  \item exception: ExternalServiceFailure, ExecutionError
\end{itemize}

\noindent GetLoginAttemptsReport(FromDatetime: string, ToDatetime: string):
\begin{itemize}
  \item output: sequence[map[string $\rightarrow$ any]]
  \item exception: ExternalServiceFailure, ExecutionError
\end{itemize}

\subsubsection{Local Functions}

N/A

\section{MIS of File Storage Interaction Module} \label{Module}

\subsection{Module}

File Storage Interaction Module

\subsection{Uses}

boto3 (AWS SDK for Python), AWS S3 (AWS Cloud Service for storing files)

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{center}
  \begin{tabular}{p{4cm} p{12cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    S3Bucket.Name & The name of the underlying S3 Bucket resource. \\
    \hline
    S3Bucket.Access & The level of access the S3Bucket object has on
    the S3 Bucket resource in AWS. Either ``read'' or ``write''. \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{>{\raggedright}p{5cm} >{\raggedright}p{4cm}
    >{\raggedright}p{2cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    S3Bucket & \textbf{BucketName:} string \newline \textbf{Access:}
    enum[``read'', ``write''] & S3Bucket & - \\
    \hline
    S3Bucket.createPresignedUrl & \textbf{Key:} string \newline
    \textbf{VersionID:} string \newline \textbf{ETag:} string
    \newline \textbf{Method:} enum[``get'', ``upload''] \newline
    \textbf{ExpiresIn:} integer & string &
    \textbf{PermissionException:} If attempting to get an upload url,
    while only having read permissions \newline
    \textbf{ExternalServiceFailure:} An internal error from AWS \\
    \hline
    S3Bucket.delete & \textbf{Key:} string \newline
    \textbf{VersionID:} string \newline \textbf{ETag:} string & - &
    \textbf{FileNotFound:} The given key and version do not match any
    file in the bucket \newline \textbf{ETagMismatch:} The given ETag
    does not match the ETag of the file with the given key and
    version \newline \textbf{ExternalServiceFailure:} An internal
    error from AWS \newline \textbf{PermissionException:} If the
    current access level is read-only \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

\begin{center}
  \begin{tabular}{p{4cm} p{12cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    Bucket & The underlying AWS S3 Bucket, can be represented
    as a set of files: $\{f_0, f_1, ..., f_n\}$, where $f_k: S3File
    \land k\in[0,n]$ \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Environment Variables}

\begin{center}
  \begin{tabular}{p{6cm} p{10cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    LAMBDA\_EXECUTION\_ROLE & When an AWS Lambda Function (The chosen
    AWS compute service for this project), it has an AWS IAM role
    attached to it, that it uses when running. This role needs
    permission for S3 bucket access for this module to work \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Assumptions}

LAMBDA\_EXECUTION\_ROLE has the required permissions in AWS to access
the S3 bucket.

\subsubsection{Access Routine Semantics}

\noindent S3Bucket.createPresignedUrl(Key: k, VersionID: v, ETag: e,
Method: m, ExpiresIn: x):
\begin{itemize}
  \item output: string
  \item exception: ExternalServiceFailure, PermissionException
\end{itemize}

\noindent S3Bucket.delete(Key: k, VersionID: v, ETag: e):
\begin{itemize}
  \item transition: $Bucket \rightarrow Bucket - \{f_{old}\}$, where
    $map\{Key: k, VersionID: v, ETag:
    e\}==S3Bucket.metadata(f_{old})$, if $S3Bucket.Access == ``write''$
  \item exception: ExternalServiceFailure, ConditionCheckFailed,
    PermissionException
\end{itemize}

\subsubsection{Local Functions}

\begin{center}
  \begin{tabular}{>{\raggedright}p{4cm} >{\raggedright}p{3cm}
    >{\raggedright}p{3.5cm} p{5.5cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Description} \\
    \hline
    S3Bucket.metadata & \textbf{File:} S3File & map[string
    $\rightarrow$ any] & Returns S3 key, versionID, and Etag of the
    given file, assuming it is from the given S3Bucket \\
    \hline
  \end{tabular}
\end{center}

\section{MIS of Function Compute Module} \label{Module}

\subsection{Module}

Function Compute Module

\subsection{Uses}

AWS Lambda (AWS Service that executes code in response to events and
manages the compute resources needed to run the code)

\subsection{Syntax}

\subsubsection{Exported Constants}

N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{>{\raggedright}p{3cm} >{\raggedright}p{5cm}
    >{\raggedright}p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    Invoke & \textbf{FunctionName:} string \newline \textbf{Event:}
    map[any $\rightarrow$ any] & map[any $\rightarrow$ any] &
    \textbf{ExternalServiceFailure:} An internal error from AWS
    \newline \textbf{ExecutionError:} Any error that occurs while the
    function is running \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

N/A

\subsubsection{Environment Variables}

\begin{center}
  \begin{tabular}{p{6cm} p{10cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    LAMBDA\_EXECUTION\_ROLE & When an AWS Lambda Function runs, it
    has an AWS IAM role attached to it, which it uses when running.
    This role gives the function the necessary permissions to execute
    without issue. \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Assumptions}

LAMBDA\_EXECUTION\_ROLE has the required permissions in AWS to
execute the lambda's required tasks.

\subsubsection{Access Routine Semantics}

N/A

\subsubsection{Local Functions}

N/A

\section{MIS of Routing Module} \label{Module}

\subsection{Module}

Routing Module

\subsection{Uses}

AWS APIGateway (AWS Cloud Service for handling routing of API to an
underlying serverless function)

\subsection{Syntax}

\subsubsection{Exported Constants}

\begin{center}
  \begin{tabular}{p{4cm} p{12cm}}
    \hline
    \textbf{Name} & \textbf{Description} \\
    \hline
    BaseUrl & The base url of the REST API \\
    \hline
  \end{tabular}
\end{center}

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{>{\raggedright}p{3cm} >{\raggedright}p{5cm}
    >{\raggedright}p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    SubmitRequest & \textbf{Request:} map[any $\rightarrow$ any]
    \newline \textbf{Path:} String & map[any $\rightarrow$ any] &
    \textbf{ExternalServiceFailure:} An internal error from
    AWS \newline \textbf{ExecutionError:} If the underlying compute
    resource that the request gets routed to encounters an error
    during execution \\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}

N/A

\subsubsection{Environment Variables}

N/A

\subsubsection{Assumptions}

N/A

\subsubsection{Access Routine Semantics}

N/A

\subsubsection{Local Functions}

N/A

\section{MIS of API Integration Module} \label{Module}

\subsection{Module}
API Integration Module
\subsection{Uses}
Routing Module
\subsection{Syntax}

\subsubsection{Exported Constants}
N/A

\subsubsection{Exported Access Programs}

\begin{center}
  \begin{tabular}{>{\raggedright}p{3cm} >{\raggedright}p{5cm}
    >{\raggedright}p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Exceptions} \\
    \hline
    submitApiRequest & \textbf{request:} HTTPRequest
    \newline \textbf{url:} String \newline \textbf{apiToken
    (optional):} String & HTTPResponse &
    \textbf{NetworkException:} If a valid network connection is not detected.
    \newline \textbf{TimeoutException:} If a response is not received within
    $\hyperlink{timeout}{TIMEOUT}$ seconds.\\
    \hline
  \end{tabular}
\end{center}

\subsection{Semantics}

\subsubsection{State Variables}
N/A

\subsubsection{Environment Variables}

\subsubsection{Assumptions}
\begin{itemize}
  \item API endpoints are up and functional
  \item The system has a internet network connection
\end{itemize}
\subsubsection{Access Routine Semantics}

\noindent submitApiRequest(url: String, request: HTTPRequest, apiToken:
Optional\textless String\textgreater):
\begin{itemize}
  \item output: HTTPResponse
  \item exception: NetworkException, TimeoutException
\end{itemize}

\subsubsection{Local Functions}

\begin{center}
  \begin{tabular}{>{\raggedright}p{3cm} >{\raggedright}p{5cm}
    >{\raggedright}p{4cm} p{4cm}}
    \hline
    \textbf{Name} & \textbf{In} & \textbf{Out} & \textbf{Description} \\
    \hline
    timeElapsed & \textbf{since:} $\mathbb{Z}$ & $\mathbb{Z}$ & Returns the
    number of seconds elapsed since the provided time given in seconds since
    Janurary 1, 1970 \\
    \hline
  \end{tabular}
\end{center}

\newpage

\bibliographystyle {plainnat}
\bibliography {../../../refs/References}

\newpage

\section{Appendix} \label{Appendix}

\subsection{Symbolic Parameters}
$\hypertarget{timeout}{TIMEOUT}$ = 5\\

\newpage{}

\section*{Appendix --- Reflection}

\wss{Not required for CAS 741 projects}

The information in this section will be used to evaluate the team members on the
graduate attribute of Problem Analysis and Design.

\input{../../Reflection.tex}

\begin{enumerate}
  \item What went well while writing this deliverable?
  \item What pain points did you experience during this deliverable, and how
    did you resolve them?
  \item Which of your design decisions stemmed from speaking to your client(s)
    or a proxy (e.g. your peers, stakeholders, potential users)? For those that
    were not, why, and where did they come from?
  \item While creating the design doc, what parts of your other documents (e.g.
    requirements, hazard analysis, etc), it any, needed to be changed, and why?
  \item What are the limitations of your solution?  Put another way, given
    unlimited resources, what could you do to make the project
    better? (LO\_ProbSolutions)
  \item Give a brief overview of other design solutions you considered.  What
    are the benefits and tradeoffs of those other designs compared
    with the chosen
    design?  From all the potential options, why did you select the
    documented design?
    (LO\_Explores)
\end{enumerate}

\end{document}
